{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2de5e759\"],{\"5d6a\":function(e,t,r){},d619:function(e,t,r){\"use strict\";var a=r(\"5d6a\"),l=r.n(a);l.a},ddc3:function(e,t,r){\"use strict\";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r(\"div\",[r(\"div\",{staticStyle:{\"margin-top\":\"15px\"}},[r(\"el-input\",{staticStyle:{\"padding-bottom\":\"10px\"},attrs:{placeholder:\"请输入内容\"},model:{value:e.criteria,callback:function(t){e.criteria=t},expression:\"criteria\"}},[r(\"el-select\",{attrs:{slot:\"prepend\",placeholder:\"请选择\"},slot:\"prepend\",model:{value:e.select,callback:function(t){e.select=t},expression:\"select\"}},[r(\"el-option\",{attrs:{label:\"工号\",value:\"1\"}}),r(\"el-option\",{attrs:{label:\"姓名\",value:\"2\"}}),r(\"el-option\",{attrs:{label:\"状态\",value:\"3\"}}),r(\"el-option\",{attrs:{label:\"电话\",value:\"4\"}})],1),r(\"el-button\",{attrs:{slot:\"append\",icon:\"el-icon-search\"},on:{click:e.search},slot:\"append\"},[e._v(\"查询\")]),r(\"el-button\",{attrs:{slot:\"append\",icon:\"el-icon-plus\"},on:{click:e.add},slot:\"append\"},[e._v(\"添加\")]),r(\"el-button\",{attrs:{slot:\"append\",icon:\"el-icon-upload2\"},on:{click:e.exportUser},slot:\"append\"},[e._v(\"导出\")])],1),r(\"el-table\",{ref:\"testTable\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,border:\"\",\"default-sort\":{prop:\"id\",order:\"ascending\"},\"row-class-name\":e.tableRowClassName},on:{\"selection-change\":e.handleSelectionChange,\"row-click\":e.handleclick}},[r(\"el-table-column\",{attrs:{type:\"selection\"}}),r(\"el-table-column\",{attrs:{prop:\"geNumber\",width:\"95px\",label:\"工号\",sortable:\"\"}}),r(\"el-table-column\",{attrs:{prop:\"geName\",label:\"姓名\",width:\"88px\",sortable:\"\"}}),r(\"el-table-column\",{attrs:{prop:\"userState\",label:\"状态\",width:\"88px\",sortable:\"\"}}),r(\"el-table-column\",{attrs:{prop:\"phone\",label:\"电话\",sortable:\"\"}}),r(\"el-table-column\",{attrs:{prop:\"email\",label:\"邮箱\",sortable:\"\"}}),r(\"el-table-column\",{attrs:{prop:\"createTime\",label:\"创建时间\",sortable:\"\"}}),r(\"el-table-column\",{attrs:{prop:\"updateTime\",label:\"修改时间\",sortable:\"\"}}),r(\"el-table-column\",{attrs:{label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[r(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:function(r){e.handleEdit(t.$index,t.row)}}},[e._v(\"编辑\")]),r(\"el-button\",{attrs:{size:\"small\",type:\"danger\"},on:{click:function(r){e.handleDelete(t.$index,t.row)}}},[e._v(\"删除\")])]}}])})],1),r(\"el-dialog\",{attrs:{title:\"修改用户\",visible:e.dialogFormVisible},on:{\"update:visible\":function(t){e.dialogFormVisible=t}}},[r(\"el-form\",{ref:\"editUserForm\",attrs:{model:e.editUserForm,rules:e.rules}},[r(\"el-form-item\",{attrs:{label:\"用户工号\",\"label-width\":e.formLabelWidth,prop:\"geNumber\"}},[r(\"el-input\",{attrs:{\"auto-complete\":\"off\"},model:{value:e.editUserForm.geNumber,callback:function(t){e.$set(e.editUserForm,\"geNumber\",t)},expression:\"editUserForm.geNumber\"}})],1),r(\"el-form-item\",{attrs:{label:\"用户状态\",\"label-width\":e.formLabelWidth,prop:\"userState\"}},[r(\"el-select\",{attrs:{placeholder:\"状态\"},model:{value:e.editUserForm.userState,callback:function(t){e.$set(e.editUserForm,\"userState\",t)},expression:\"editUserForm.userState\"}},[r(\"el-option\",{attrs:{label:\"有效\",value:\"有效\"}}),r(\"el-option\",{attrs:{label:\"无效\",value:\"无效\"}})],1)],1),r(\"el-form-item\",{attrs:{label:\"姓名\",\"label-width\":e.formLabelWidth,prop:\"geName\"}},[r(\"el-input\",{attrs:{\"auto-complete\":\"off\"},model:{value:e.editUserForm.geName,callback:function(t){e.$set(e.editUserForm,\"geName\",t)},expression:\"editUserForm.geName\"}})],1),r(\"el-form-item\",{attrs:{label:\"角色\",\"label-width\":e.formLabelWidth,prop:\"roleId\"}},[r(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.editUserForm.roleId,callback:function(t){e.$set(e.editUserForm,\"roleId\",t)},expression:\"editUserForm.roleId\"}},e._l(e.roles,function(e){return r(\"el-option\",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}),1)],1)],1),r(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v(\"取 消\")]),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.editSubmitForm(\"editUserForm\")}}},[e._v(\"确 定\")])],1)],1),r(\"el-dialog\",{attrs:{title:\"添加用户\",visible:e.addFormVisible},on:{\"update:visible\":function(t){e.addFormVisible=t}}},[r(\"el-form\",{ref:\"addUserForm\",attrs:{model:e.addUserForm,rules:e.rules}},[r(\"el-form-item\",{attrs:{label:\"工号\",\"label-width\":e.formLabelWidth,prop:\"geNumber\"}},[r(\"el-input\",{attrs:{\"auto-complete\":\"off\"},model:{value:e.addUserForm.geNumber,callback:function(t){e.$set(e.addUserForm,\"geNumber\",t)},expression:\"addUserForm.geNumber\"}})],1),r(\"el-form-item\",{attrs:{label:\"姓名\",\"label-width\":e.formLabelWidth,prop:\"geName\"}},[r(\"el-input\",{attrs:{\"auto-complete\":\"off\"},model:{value:e.addUserForm.geName,callback:function(t){e.$set(e.addUserForm,\"geName\",t)},expression:\"addUserForm.geName\"}})],1),r(\"el-form-item\",{attrs:{label:\"角色\",\"label-width\":e.formLabelWidth,prop:\"roleId\"}},[r(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.addUserForm.roleId,callback:function(t){e.$set(e.addUserForm,\"roleId\",t)},expression:\"addUserForm.roleId\"}},e._l(e.roles,function(e){return r(\"el-option\",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}),1)],1),r(\"el-form-item\",{attrs:{label:\"状态\",\"label-width\":e.formLabelWidth,prop:\"userState\"}},[r(\"el-select\",{attrs:{placeholder:\"状态\"},model:{value:e.addUserForm.userState,callback:function(t){e.$set(e.addUserForm,\"userState\",t)},expression:\"addUserForm.userState\"}},[r(\"el-option\",{attrs:{label:\"有效\",value:\"有效\"}}),r(\"el-option\",{attrs:{label:\"无效\",value:\"无效\"}})],1)],1),r(\"el-form-item\",{attrs:{label:\"密码\",\"label-width\":e.formLabelWidth,prop:\"password\"}},[r(\"el-input\",{attrs:{\"auto-complete\":\"off\"},model:{value:e.addUserForm.password,callback:function(t){e.$set(e.addUserForm,\"password\",t)},expression:\"addUserForm.password\"}})],1),r(\"el-form-item\",{attrs:{label:\"手机号\",\"label-width\":e.formLabelWidth,prop:\"phone\"}},[r(\"el-input\",{attrs:{\"auto-complete\":\"off\"},model:{value:e.addUserForm.phone,callback:function(t){e.$set(e.addUserForm,\"phone\",t)},expression:\"addUserForm.phone\"}})],1),r(\"el-form-item\",{attrs:{label:\"邮箱\",\"label-width\":e.formLabelWidth,prop:\"email\"}},[r(\"el-input\",{attrs:{\"auto-complete\":\"off\"},model:{value:e.addUserForm.email,callback:function(t){e.$set(e.addUserForm,\"email\",t)},expression:\"addUserForm.email\"}})],1)],1),r(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[r(\"el-button\",{on:{click:function(t){e.addFormVisible=!1}}},[e._v(\"取 消\")]),r(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.addSubmitForm(\"addUserForm\")}}},[e._v(\"确 定\")])],1)],1),r(\"div\",{attrs:{align:\"center\"}},[r(\"el-pagination\",{attrs:{\"current-page\":e.currentPage,\"page-sizes\":[5,10,20,30,40],\"page-size\":e.pagesize,layout:\"total, sizes, prev, pager, next, jumper\",total:e.totalCount},on:{\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1)],1)])},l=[],s=(r(\"cadf\"),r(\"551c\"),r(\"097d\"),r(\"365c\")),o={data:function(){return{tableData:[],multipleSelection:[],criteria:\"\",select:\"\",pagesize:10,highlightId:-1,currentPage:1,start:1,totalCount:1e3,roles:[],editUserForm:{geNumber:\"\",userState:\"\",roleId:\"\",geName:\"\"},addUserForm:{geNumber:\"\",geName:\"\",userState:\"\",roleId:\"\",phone:\"\",email:\"\",password:\"\"},dialogFormVisible:!1,addFormVisible:!1,formLabelWidth:\"120px\",rules:{geNumber:[{required:!0,message:\"请填写工号\",trigger:\"blur\"},{min:7,max:7,message:\"请填写7个字符的工号\",trigger:\"blur\"}],geName:[{required:!0,message:\"请填写姓名\",trigger:\"blur\"},{min:2,max:4,message:\"请填写2-4个字符的姓名\",trigger:\"blur\"}],roleId:[{required:!0,message:\"请选择角色\",trigger:\"blur\"}],password:[{required:!0,message:\"请填写密码\",trigger:\"blur\"},{min:6,max:10,message:\"请填写6-10个字符的密码\",trigger:\"blur\"}],userState:[{required:!0,message:\"请选择状态\",trigger:\"blur\"}],phone:[{validator:function(e,t,r){var a=s[\"a\"].validate.VDATA(t,{required:{msg:\"请输入手机号\"},mphone:{msg:\"请输入有效的手机号\"}});a.result?r():r(new Error(a.msg))},trigger:\"blur\"}],email:[{validator:function(e,t,r){var a=s[\"a\"].validate.VDATA(t,{required:{msg:\"请输入邮箱\"},email:{msg:\"请输入有效的邮箱\"}});a.result?r():r(new Error(a.msg))},trigger:\"blur\"}]}}},created:function(){this.loadData(this.criteria,this.currentPage,this.pagesize),(this.hasPerm(\"user:add\")||this.hasPerm(\"user:update\"))&&this.getAllRoles()},methods:{loadData:function(e,t,r){var a=this,l={parameter:e,pageNum:t,pageSize:r};s[\"a\"].userUtil.getData(l).then(function(e){var t=e.data;console.log(t),0==t.status?(a.tableData=t.data.userData,a.totalCount=t.data.number):a.$message(\"请求失败！\")}).catch(function(e){a.$message(\"请求失败ww！\"),console.log(e)})},getAllRoles:function(){var e=this;this.api({url:\"/api/user/getAllRoles\",method:\"get\"}).then(function(t){e.roles=t.list})},handleSelectionChange:function(e){this.multipleSelection=e},handleclick:function(e,t,r){this.highlightId=e.id},handleEdit:function(e,t){this.editUserForm.geNumber=t.geNumber,this.editUserForm.userState=t.userState,this.editUserForm.geName=t.geName,this.dialogFormVisible=!0},editSubmitForm:function(e){var t=this,r={geNumber:this.editUserForm.geNumber,userState:this.editUserForm.userState,geName:this.editUserForm.geName,roleId:this.editUserForm.roleId};this.$refs[e].validate(function(e){if(!e)return t.$message.error(\"请求失败！\"),t.$refs[\"editUserForm\"].resetFields(),!1;s[\"a\"].userUtil.updateUser(r).then(function(e){var r=e.data;1==r.data?(t.dialogFormVisible=!1,t.loadData(t.criteria,t.currentPage,t.pagesize),t.$message(\"修改成功！\"),t.$refs[\"editUserForm\"].resetFields()):(t.$message(\"请求失败！\"),t.$refs[\"editUserForm\"].resetFields())}).catch(function(e){t.$message(\"请求失败！\"),t.$refs[\"editUserForm\"].resetFields(),console.log(e)})})},addSubmitForm:function(e){var t=this,r={geNumber:this.addUserForm.geNumber,geName:this.addUserForm.geName,userState:this.addUserForm.userState,roleId:this.addUserForm.roleId,phone:this.addUserForm.phone,email:this.addUserForm.email,password:this.addUserForm.password};this.$refs[e].validate(function(e){if(!e)return!1;s[\"a\"].userUtil.addUser(r).then(function(e){var r=e.data;1==r.data?(t.addFormVisible=!1,t.$message(\"添加成功!\"),t.$refs[\"addUserForm\"].resetFields(),t.loadData(t.criteria,t.currentPage,t.pagesize)):(t.$message(r.data),t.$refs[\"addUserForm\"].resetFields())}).catch(function(e){t.$message(e.data),t.$refs[\"addUserForm\"].resetFields(),console.log(e)})})},handleDelete:function(e,t){var r=this,a={geNumber:t.geNumber};this.$confirm(\"此操作将永久删除“\"+t.geNumber+\"”, 是否继续?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(function(){s[\"a\"].userUtil.deleteUser(a).then(function(e){var t=e.data;1==t.data?(r.$message({type:\"success\",message:\"删除成功!\"}),r.loadData(r.criteria,r.currentPage,r.pagesize)):r.$message({type:\"info\",message:\"删除失败\"})}).catch(function(e){r.$message(\"请求失败！\")}),r.$message({type:\"success\",message:\"删除成功!\"})}).catch(function(){r.$message({type:\"info\",message:\"已取消删除\"})})},search:function(){console.log(this.select),this.loadData(this.criteria,this.currentPage,this.pagesize)},add:function(){this.addFormVisible=!0},exportUser:function(){window.location.href=\"http://localhost:8088/api/exportUser.do\"},tableRowClassName:function(e,t){if(e.id==this.highlightId)return\"info-row\"},handleSizeChange:function(e){this.pagesize=e,this.loadData(this.criteria,this.currentPage,this.pagesize)},handleCurrentChange:function(e){this.currentPage=e,this.loadData(this.criteria,this.currentPage,this.pagesize)}}},i=o,d=(r(\"d619\"),r(\"2877\")),n=Object(d[\"a\"])(i,a,l,!1,null,\"79b74546\",null);n.options.__file=\"User.vue\";t[\"default\"]=n.exports}}]);","extractedComments":[]}