{"remainingRequest":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\babel-loader\\lib\\index.js!E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\energy\\qiantai\\vue-energy\\src\\components\\page\\User.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\code\\energy\\qiantai\\vue-energy\\src\\components\\page\\User.vue","mtime":1559119701485},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport \"core-js/modules/es7.promise.finally\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport API from '@/api';\nimport Vue from 'vue';\nexport default {\n  data: function data() {\n    return {\n      //表格当前页数据\n      tableData: [],\n      //多选数组\n      multipleSelection: [],\n      //搜索条件\n      criteria: '',\n      //下拉菜单选项\n      select: '',\n      //默认每页数据量\n      pagesize: 10,\n      //默认高亮行数据id\n      highlightId: -1,\n      //当前页码\n      currentPage: 1,\n      //查询的页码\n      start: 1,\n      //默认数据总数\n      totalCount: 1000,\n      editUserForm: {\n        geNumber: '',\n        userState: ''\n      },\n      addUserForm: {\n        geNumber: '',\n        geName: '',\n        userState: '',\n        phone: '',\n        email: '',\n        password: ''\n      },\n      dialogFormVisible: false,\n      addFormVisible: false,\n      formLabelWidth: '120px',\n      rules: {\n        geNumber: [{\n          required: true,\n          message: '请填写工号',\n          trigger: 'blur'\n        }, {\n          min: 7,\n          max: 7,\n          message: '请填写7个字符的工号',\n          trigger: 'blur'\n        }],\n        geName: [{\n          required: true,\n          message: '请填写姓名',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 4,\n          message: '请填写2-4个字符的姓名',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请填写密码',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          max: 10,\n          message: '请填写6-10个字符的密码',\n          trigger: 'blur'\n        }],\n        userState: [{\n          required: true,\n          message: '请选择状态',\n          trigger: 'blur'\n        }],\n        phone: [{\n          validator: function validator(rule, value, callback) {\n            var vdt = API.validate.VDATA(value, {\n              \"required\": {\n                msg: \"请输入手机号\"\n              },\n              \"mphone\": {\n                msg: \"请输入有效的手机号\"\n              }\n            });\n\n            if (!vdt.result) {\n              callback(new Error(vdt.msg));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        }],\n        email: [{\n          validator: function validator(rule, value, callback) {\n            var vdt = API.validate.VDATA(value, {\n              \"required\": {\n                msg: \"请输入邮箱\"\n              },\n              \"email\": {\n                msg: \"请输入有效的邮箱\"\n              }\n            });\n\n            if (!vdt.result) {\n              callback(new Error(vdt.msg));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created: function created() {\n    this.loadData(this.criteria, this.currentPage, this.pagesize);\n  },\n  methods: {\n    //从服务器读取数据\n    loadData: function loadData(criteria, pageNum, pageSize) {\n      var _this = this;\n\n      var params = {\n        'parameter': criteria,\n        'pageNum': pageNum,\n        'pageSize': pageSize\n      };\n      API.userUtil.getData(params).then(function (_ref) {\n        var data = _ref.data;\n        console.log(data);\n\n        if (data.status == 0) {\n          _this.tableData = data.data.userData;\n          _this.totalCount = data.data.number;\n        } else {\n          //this.$Message.error(data.msg);\n          _this.$message(\"请求失败！\");\n        }\n      }).catch(function (data) {\n        _this.$message(\"请求失败ww！\");\n\n        console.log(data);\n      });\n    },\n    //多选响应\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    //点击行响应\n    handleclick: function handleclick(row, event, column) {\n      this.highlightId = row.id;\n    },\n    //编辑\n    handleEdit: function handleEdit(index, row) {\n      this.editUserForm.geNumber = row.geNumber;\n      this.editUserForm.userState = row.userState;\n      this.dialogFormVisible = true;\n    },\n    //修改\n    editSubmitForm: function editSubmitForm(editUserForm) {\n      var _this2 = this;\n\n      var params = {\n        'geNumber': this.editUserForm.geNumber,\n        'userState': this.editUserForm.userState\n      };\n      this.$refs[editUserForm].validate(function (valid) {\n        if (valid) {\n          API.userUtil.updateUser(params).then(function (_ref2) {\n            var data = _ref2.data;\n\n            if (data.data == true) {\n              _this2.dialogFormVisible = false;\n\n              _this2.loadData(_this2.criteria, _this2.currentPage, _this2.pagesize);\n            } else {\n              _this2.$message(\"请求失败！\");\n            }\n          }).catch(function (data) {\n            _this2.$message(\"请求失败！\");\n\n            console.log(data);\n          });\n        } else {\n          _this2.$message.error(\"请求失败！\");\n\n          return false;\n        }\n      });\n    },\n    //添加用户\n    addSubmitForm: function addSubmitForm(addUserForm) {\n      var _this3 = this;\n\n      var params = {\n        'geNumber': this.addUserForm.geNumber,\n        'geName': this.addUserForm.geName,\n        'userState': this.addUserForm.userState,\n        'phone': this.addUserForm.phone,\n        'email': this.addUserForm.email,\n        'password': this.addUserForm.password\n      };\n      this.$refs[addUserForm].validate(function (valid) {\n        if (valid) {\n          API.userUtil.addUser(params).then(function (_ref3) {\n            var data = _ref3.data;\n\n            if (data.data == true) {\n              _this3.addFormVisible = false;\n\n              _this3.$message(\"添加成功!\");\n\n              _this3.loadData(_this3.criteria, _this3.currentPage, _this3.pagesize);\n            } else {\n              _this3.$message(\"请求失败！\");\n            }\n          }).catch(function (data) {\n            _this3.$message(\"请求失败！\");\n\n            console.log(data);\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    //单行删除\n    handleDelete: function handleDelete(index, row) {\n      var _this4 = this;\n\n      var params = {\n        'geNumber': row.geNumber\n      };\n      this.$confirm('此操作将永久删除“' + row.geNumber + '”, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        API.userUtil.deleteUser(params).then(function (_ref4) {\n          var data = _ref4.data;\n\n          if (data.data == true) {\n            _this4.$message({\n              type: 'success',\n              message: '删除成功!'\n            });\n\n            _this4.loadData(_this4.criteria, _this4.currentPage, _this4.pagesize);\n          } else {\n            _this4.$message({\n              type: 'info',\n              message: '删除失败'\n            });\n          }\n        }).catch(function (data) {\n          _this4.$message(\"请求失败！\");\n        });\n\n        _this4.$message({\n          type: 'success',\n          message: '删除成功!'\n        });\n      }).catch(function () {\n        _this4.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    },\n    //搜索\n    search: function search() {\n      console.log(this.select);\n      this.loadData(this.criteria, this.currentPage, this.pagesize);\n    },\n    add: function add() {\n      this.addFormVisible = true;\n    },\n    exportUser: function exportUser() {\n      window.location.href = \"http://localhost:8088/api/exportUser.do\";\n    },\n\n    /*\r\n          //多项删除\r\n          deletenames: function(){\r\n          \tif(this.multipleSelection.length==0)\r\n          \t\treturn;\r\n          \tvar array = [];\r\n          \tthis.multipleSelection.forEach((item) = > {\r\n          \t\tarray.push(item.id);\r\n           })\r\n    \tthis.$http.post('../delete',{\"array\":array},{emulateJSON: true}).then(function(res){\r\n    \t\tthis.loadData(this.criteria, this.currentPage, this.pagesize);\r\n              },function(){\r\n                  console.log('failed');\r\n              });\r\n          },\r\n        */\n    //改变当前点击的行的class，高亮当前行\n    tableRowClassName: function tableRowClassName(row, index) {\n      if (row.id == this.highlightId) {\n        return 'info-row';\n      }\n    },\n    //每页显示数据量变更\n    handleSizeChange: function handleSizeChange(val) {\n      this.pagesize = val;\n      this.loadData(this.criteria, this.currentPage, this.pagesize);\n    },\n    //页码变更\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.currentPage = val;\n      this.loadData(this.criteria, this.currentPage, this.pagesize);\n    }\n  }\n};",{"version":3,"sources":["User.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<div ><!--\r\n    <div id=\"top\">\t\t\t\r\n\t\t\t<span>\r\n\t\t\t\t<el-button type=\"text\" @click=\"dialogFormVisible = true\" style=\"color:white\" >添加</el-button>\r\n\t\t\t\t<el-button type=\"text\" @click=\"deletenames\" style=\"color:white\">批量删除</el-button>\r\n\t\t\t</span>\t\t\t\t\t\t\r\n\t\t</div>\t\r\n\t\t<br/>-->\r\n        <div style=\"margin-top:15px\">\r\n           <el-input placeholder=\"请输入内容\" v-model=\"criteria\" style=\"padding-bottom:10px;\">\r\n\t\t\t  <el-select v-model=\"select\" slot=\"prepend\" placeholder=\"请选择\">\r\n\t\t\t     <!--<el-option label=\"id\" value=\"1\"></el-option>-->\r\n\t\t\t      <el-option label=\"工号\" value=\"1\"></el-option>\r\n\t\t\t\t  <el-option label=\"姓名\" value=\"2\"></el-option>\r\n\t\t\t\t  <el-option label=\"状态\" value=\"3\"></el-option>\r\n\t\t\t\t  <el-option label=\"电话\" value=\"4\"></el-option>\r\n\t\t\t  </el-select>\r\n\t\t\t  <el-button slot=\"append\" icon=\"el-icon-search\" v-on:click=\"search\">查询</el-button>\r\n              <el-button slot=\"append\" icon=\"el-icon-plus\" v-on:click=\"add\">添加</el-button>\r\n\t\t\t  <el-button slot=\"append\" icon=\"el-icon-upload2\" v-on:click=\"exportUser\">导出</el-button>\r\n\t\t  </el-input>  \t\t\r\n\r\n\t\t  <el-table\r\n\t\t    ref=\"testTable\"\r\n\t\t    :data=\"tableData\"\r\n\t\t    style=\"width:100%\"\r\n\t\t    border\r\n\t\t    :default-sort = \"{prop: 'id', order: 'ascending'}\"\r\n\t\t    @selection-change=\"handleSelectionChange\"\t\r\n\t\t    @row-click=\"handleclick\"\r\n\t\t    :row-class-name = \"tableRowClassName\"\r\n\t\t    >\r\n\t\t    <el-table-column\r\n\t\t      type=\"selection\"\r\n\t\t      >\r\n\t\t    </el-table-column>\r\n\t\t\t  <!--\r\n\t\t    <el-table-column\r\n\t\t      prop=\"id\"\r\n\t\t      label=\"Id\"\r\n\t\t      sortable\r\n\t\t      show-overflow-tooltip>\r\n\t\t    </el-table-column>-->\r\n\t\t    <el-table-column\r\n\t\t      prop=\"geNumber\"\r\n\t\t\t  width=\"95px\"\r\n\t\t      label=\"工号\"\r\n\t\t      sortable>\r\n\t\t    </el-table-column>\r\n\t\t\t  <el-table-column\r\n\t\t\t\t\t  prop=\"geName\"\r\n\t\t\t\t\t  label=\"姓名\"\r\n\t\t\t\t\t  width=\"88px\"\r\n\t\t\t\t\t  sortable>\r\n\t\t\t  </el-table-column>\r\n\t\t\t  <el-table-column\r\n\t\t\t\t\t  prop=\"userState\"\r\n\t\t\t\t\t  label=\"状态\"\r\n\t\t\t\t\t  width=\"88px\"\r\n\t\t\t\t\t  sortable>\r\n\t\t\t  </el-table-column>\r\n\t\t\t  <el-table-column\r\n\t\t\t\t\t  prop=\"phone\"\r\n\t\t\t\t\t  label=\"电话\"\r\n\t\t\t\t\t  sortable>\r\n\t\t\t  </el-table-column>\r\n\t\t\t  <el-table-column\r\n\t\t\t\t\t  prop=\"email\"\r\n\t\t\t\t\t  label=\"邮箱\"\r\n\t\t\t\t\t  sortable>\r\n\t\t\t  </el-table-column>\r\n\t\t\t  <el-table-column\r\n\t\t\t\t\t  prop=\"createTime\"\r\n\t\t\t\t\t  label=\"创建时间\"\r\n\t\t\t\t\t  sortable>\r\n\t\t\t  </el-table-column>\r\n\t\t\t  <el-table-column\r\n\t\t\t\t\t  prop=\"updateTime\"\r\n\t\t\t\t\t  label=\"修改时间\"\r\n\t\t\t\t\t  sortable>\r\n\t\t\t  </el-table-column>\r\n\t        <el-table-column label=\"操作\">\r\n\t\t      <template scope=\"scope\">\r\n\t\t        <el-button\r\n\t\t          size=\"small\"\r\n\t\t          type=\"primary\"\r\n\t\t          @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n\t\t        <el-button\r\n\t\t          size=\"small\"\r\n\t\t          type=\"danger\"\r\n\t\t          @click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n\t\t      </template>\r\n\t\t    </el-table-column>\r\n\t\t  </el-table>\r\n\t\t  \r\n        <el-dialog title=\"修改用户\" :visible.sync=\"dialogFormVisible\">\r\n            <el-form :model=\"editUserForm\" :rules=\"rules\" ref=\"editUserForm\">\r\n            <el-form-item label=\"用户工号\" :label-width=\"formLabelWidth\" prop=\"geNumber\">\r\n                <el-input v-model=\"editUserForm.geNumber\" auto-complete=\"off\" ></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"用户状态\" :label-width=\"formLabelWidth\" prop=\"userState\">\r\n                 <el-select v-model=\"editUserForm.userState\" placeholder=\"状态\">\r\n                     <el-option label=\"有效\" value=\"有效\"></el-option>\r\n                     <el-option label=\"无效\" value=\"无效\"></el-option>\r\n                 </el-select>\r\n            </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"editSubmitForm('editUserForm')\">确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n\r\n        <el-dialog title=\"添加用户\" :visible.sync=\"addFormVisible\">\r\n            <el-form :model=\"addUserForm\" :rules=\"rules\" ref=\"addUserForm\">\r\n            <el-form-item label=\"工号\" :label-width=\"formLabelWidth\" prop=\"geNumber\">\r\n                <el-input v-model=\"addUserForm.geNumber\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n             <el-form-item label=\"姓名\" :label-width=\"formLabelWidth\" prop=\"geName\">\r\n                <el-input v-model=\"addUserForm.geName\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n             <el-form-item label=\"状态\" :label-width=\"formLabelWidth\" prop=\"userState\">\r\n                 <el-select v-model=\"addUserForm.userState\" placeholder=\"状态\">\r\n                     <el-option label=\"有效\" value=\"有效\"></el-option>\r\n                     <el-option label=\"无效\" value=\"无效\"></el-option>\r\n                 </el-select>\r\n            </el-form-item>\r\n             <el-form-item label=\"手机号\" :label-width=\"formLabelWidth\" prop=\"phone\">\r\n                <el-input v-model=\"addUserForm.phone\" auto-complete=\"off\" ></el-input>\r\n            </el-form-item>\r\n             <el-form-item label=\"邮箱\" :label-width=\"formLabelWidth\" prop=\"email\">\r\n                <el-input v-model=\"addUserForm.email\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n             <el-form-item label=\"密码\" :label-width=\"formLabelWidth\" prop=\"password\">\r\n                <el-input v-model=\"addUserForm.password\" auto-complete=\"off\"></el-input>\r\n            </el-form-item>\r\n            </el-form>\r\n            <div slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"addFormVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"addSubmitForm('addUserForm')\">确 定</el-button>\r\n            </div>\r\n        </el-dialog>\r\n\r\n\t\t  <div align=\"center\">\r\n\t\t\t  <el-pagination\r\n\t\t\t      @size-change=\"handleSizeChange\"\r\n\t\t\t      @current-change=\"handleCurrentChange\"\r\n\t\t\t      :current-page=\"currentPage\"\r\n\t\t\t      :page-sizes=\"[5,10, 20, 30, 40]\"\r\n\t\t\t      :page-size=\"pagesize\"\r\n\t\t\t      layout=\"total, sizes, prev, pager, next, jumper\"\r\n\t\t\t      :total=\"totalCount\">\r\n\t\t\t  </el-pagination>\r\n\t\t  </div>\r\n\t\t</div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport API from '@/api';\r\nimport Vue from 'vue';\r\nexport default {\r\n      data() {\t\r\n          return{\r\n              //表格当前页数据\r\n\t\t    \ttableData: [],\r\n\t\t    \t//多选数组\r\n\t\t        multipleSelection: [],\r\n\t\t        //搜索条件\r\n\t\t        criteria: '',\r\n\t\t        //下拉菜单选项\r\n\t\t        select: '',\r\n\t\t        //默认每页数据量\r\n\t\t        pagesize: 10,\r\n\t\t        //默认高亮行数据id\r\n\t\t        highlightId: -1,\r\n\t\t        //当前页码\r\n\t\t        currentPage: 1,\r\n\t\t        //查询的页码\r\n\t\t        start: 1,\r\n\t\t        //默认数据总数\r\n\t\t        totalCount: 1000,\r\n\t\t\t\teditUserForm: {\r\n\t\t\t\t\tgeNumber: '',\r\n\t\t\t\t\tuserState: ''\r\n                },\r\n                addUserForm: {\r\n                    geNumber: '',\r\n                    geName:'',\r\n                    userState: '',\r\n                    phone:'',\r\n                    email:'',\r\n                    password:''\r\n                },\r\n                dialogFormVisible: false,\r\n                addFormVisible: false,\r\n                formLabelWidth: '120px',\r\n                rules: {\r\n                    geNumber: [\r\n                        { required: true, message: '请填写工号', trigger: 'blur' },\r\n                        { min: 7,max: 7, message: '请填写7个字符的工号', trigger: 'blur' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tgeName: [\r\n                        { required: true, message: '请填写姓名', trigger: 'blur' },\r\n                        { min: 2,max: 4, message: '请填写2-4个字符的姓名', trigger: 'blur' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tpassword: [\r\n                        { required: true, message: '请填写密码', trigger: 'blur' },\r\n                        { min: 6,max: 10, message: '请填写6-10个字符的密码', trigger: 'blur' }\r\n                    ],\r\n                    userState: [\r\n                        { required: true, message: '请选择状态', trigger: 'blur' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tphone: [\r\n                          { \r\n                             validator: (rule,value,callback) => {\r\n                                let vdt = API.validate.VDATA(value,{\"required\" : { msg : \"请输入手机号\"}, \"mphone\" : {msg:\"请输入有效的手机号\"}})\r\n                               if (!vdt.result) {\r\n                                    callback(new Error(vdt.msg))\r\n                                }else{\r\n                                    callback();\r\n                                }\r\n                           },\r\n                             trigger: 'blur' \r\n                           }\r\n\t\t\t\t\t],\r\n\t\t\t\t\temail: [\r\n                          { \r\n                             validator: (rule,value,callback) => {\r\n                                let vdt = API.validate.VDATA(value,{\"required\" : { msg : \"请输入邮箱\"}, \"email\" : {msg:\"请输入有效的邮箱\"}})\r\n                               if (!vdt.result) {\r\n                                    callback(new Error(vdt.msg))\r\n                                }else{\r\n                                    callback();\r\n                                }\r\n                           },\r\n                             trigger: 'blur' \r\n                           }\r\n\t\t\t\t\t],\r\n                }\r\n               }\t  \r\n            },\r\n             created() {\r\n            this.loadData(this.criteria, this.currentPage, this.pagesize);\r\n            },\r\n\t\t    methods: {\r\n\t\t        //从服务器读取数据\r\n\t\t\t\tloadData: function(criteria, pageNum, pageSize){\t\t\r\n                     let params = {\r\n                    'parameter': criteria,\r\n                    'pageNum': pageNum,\r\n                    'pageSize': pageSize\r\n                  };\t\r\n                  API.userUtil.getData(params).then(({data}) => {\r\n                       console.log(data);\r\n                        if (data.status == 0){\r\n                            this.tableData = data.data.userData;\r\n                \t\t    this.totalCount = data.data.number; \r\n                        } else {\r\n                            //this.$Message.error(data.msg);\r\n                            this.$message(\"请求失败！\");\r\n                        }\r\n                    }).catch((data) => {\r\n                    this.$message(\"请求失败ww！\");\r\n                    console.log(data);\r\n                });\t\r\n\t\t\t\t},\r\n\t\t    \t\r\n\t\t\t\t//多选响应\r\n\t\t\t    handleSelectionChange: function(val) {\r\n\t\t\t        this.multipleSelection = val;\r\n\t\t\t    },\r\n\t\t\t    \r\n\t\t\t    //点击行响应\r\n\t\t\t    handleclick: function(row, event, column){\r\n\t\t\t    \tthis.highlightId = row.id;\r\n\t\t\t    },\r\n\t\t\t\t\t\r\n\t\t\t    //编辑\r\n\t\t\t\thandleEdit: function(index, row) {\r\n\t\t\t\t\tthis.editUserForm.geNumber = row.geNumber;\r\n\t\t\t\t\tthis.editUserForm.userState = row.userState;\r\n\t\t\t\t\tthis.dialogFormVisible = true;\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t//修改\r\n                editSubmitForm(editUserForm){\r\n                       let params = {\r\n                    'geNumber': this.editUserForm.geNumber,\r\n                    'userState': this.editUserForm.userState\r\n                  };\t\r\n                    this.$refs[editUserForm].validate((valid) => {\r\n                    if (valid) {\r\n                        API.userUtil.updateUser(params).then(({data}) => {\r\n                        if (data.data == true){\r\n                            this.dialogFormVisible = false;\r\n                            this.loadData(this.criteria, this.currentPage, this.pagesize);\r\n                        } else {\r\n                            this.$message(\"请求失败！\");\r\n                        }\r\n                    }).catch((data) => {\r\n                    this.$message(\"请求失败！\");\r\n                    console.log(data);\r\n                });\r\n                } else {\r\n                         this.$message.error(\"请求失败！\");\r\n                        return false;\r\n                }\r\n                });\r\n\t\t\t\t},    \r\n\t\t\t\t\r\n\t\t\t\t//添加用户\r\n                addSubmitForm(addUserForm){\r\n                       let params = {\r\n                    'geNumber': this.addUserForm.geNumber,\r\n                    'geName': this.addUserForm.geName,\r\n                    'userState': this.addUserForm.userState,\r\n                    'phone': this.addUserForm.phone,\r\n\t\t\t\t\t'email': this.addUserForm.email,\r\n\t\t\t\t\t'password': this.addUserForm.password\r\n                  };\t\r\n              \r\n                    this.$refs[addUserForm].validate((valid) => {\r\n                    if (valid) {\r\n                        API.userUtil.addUser(params).then(({data}) => {\r\n                        if (data.data == true){\r\n                            this.addFormVisible = false;\r\n                            this.$message(\"添加成功!\");\r\n                            this.loadData(this.criteria, this.currentPage, this.pagesize);\r\n                        } else {\r\n                            this.$message(\"请求失败！\");\r\n                        }\r\n                    }).catch((data) => {\r\n                    this.$message(\"请求失败！\");\r\n                    console.log(data);\r\n                });\r\n                } else {\r\n                        return false;\r\n                }\r\n                });\r\n\t\t\t\t}, \r\n\t\t\t\t\r\n\t\t        //单行删除\r\n\t\t\t    handleDelete: function(index, row) {\r\n                    let params = {'geNumber': row.geNumber};\t\r\n                    this.$confirm('此操作将永久删除“'+row.geNumber+'”, 是否继续?', '提示', {\r\n                        confirmButtonText: '确定',\r\n                        cancelButtonText: '取消',\r\n                        type: 'warning'\r\n                    }).then(() => {\r\n                        API.userUtil.deleteUser(params).then(({data}) => {\r\n                        if (data.data == true){\r\n                            this.$message({type: 'success',message: '删除成功!'});\r\n                            this.loadData(this.criteria, this.currentPage, this.pagesize);\r\n                        } else {\r\n                            this.$message({type: 'info',message: '删除失败'});          \r\n                        }\r\n                    }).catch((data) => {\r\n                    this.$message(\"请求失败！\");\r\n                });\r\n                        this.$message({type: 'success',message: '删除成功!'});\r\n                    }).catch(() => {\r\n                        this.$message({type: 'info',message: '已取消删除'});          \r\n                })\r\n\t\t        },\r\n\r\n\t\t        //搜索\r\n\t\t        search: function(){\r\n\t\t\t\t\tconsole.log(this.select);\r\n\t\t        \tthis.loadData(this.criteria, this.currentPage, this.pagesize);\r\n\t\t        },\r\n                add:function(){\r\n                    this.addFormVisible = true;\r\n\t\t\t\t},\r\n\t\t\t\texportUser(){\r\n\t\t\t\t\t\t window.location.href = \"http://localhost:8088/api/exportUser.do\";\r\n\t\t\t\t},\r\n\t\t\t\t/*\r\n\t\t        //多项删除\r\n\t\t        deletenames: function(){\r\n\t\t        \tif(this.multipleSelection.length==0)\r\n\t\t        \t\treturn;\r\n\t\t        \tvar array = [];\r\n\t\t        \tthis.multipleSelection.forEach((item) = > {\r\n\t\t        \t\tarray.push(item.id);\r\n\t\t\t        })\r\n\t\t\t\t\tthis.$http.post('../delete',{\"array\":array},{emulateJSON: true}).then(function(res){\r\n\t\t\t\t\t\tthis.loadData(this.criteria, this.currentPage, this.pagesize);\r\n\t\t            },function(){\r\n\t\t                console.log('failed');\r\n\t\t            });\r\n\t\t        },\r\n\t\t      */\r\n\t\t        //改变当前点击的行的class，高亮当前行\r\n\t\t        tableRowClassName: function(row, index){\r\n\t\t    \t   if(row.id == this.highlightId)\r\n\t\t    \t   {\r\n\t\t    \t\t  return 'info-row';\r\n\t\t    \t   }\r\n\t\t        },\r\n\t\t      \r\n\t\t        //每页显示数据量变更\r\n\t\t        handleSizeChange: function(val) {\r\n\t\t            this.pagesize = val;\r\n\t\t            this.loadData(this.criteria, this.currentPage, this.pagesize);\r\n\t\t        },\r\n\t\t        \r\n\t\t        //页码变更\r\n\t\t        handleCurrentChange: function(val) {\r\n\t\t            this.currentPage = val;\r\n\t\t            this.loadData(this.criteria, this.currentPage, this.pagesize);\r\n\t\t        },\t      \r\n\t\t        \t\t        \r\n\t\t    },\t    \r\n\t\t    \r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\t  .el-select .el-input {\r\n\t    width: 110px;\r\n\t  }\r\n\r\n  \t  .el-table .info-row {\r\n    \t\tbackground: #c9e5f5;\r\n      }\t  \r\n      \r\n      #top {\r\n\t      background:#20A0FF;\r\n\t      padding:5px;\r\n\t      overflow:hidden\r\n      }\r\n\t</style>\r\n"],"sourceRoot":"src\\components\\page"}]}