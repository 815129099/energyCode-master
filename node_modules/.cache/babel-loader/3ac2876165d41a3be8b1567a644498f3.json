{"remainingRequest":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\babel-loader\\lib\\index.js!E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\energy\\qiantai\\vue-energy\\src\\components\\common\\ImportResult.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\code\\energy\\qiantai\\vue-energy\\src\\components\\common\\ImportResult.vue","mtime":1560150704665},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _objectSpread from \"E:\\\\code\\\\energy\\\\qiantai\\\\vue-energy\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport _getIterator from \"E:\\\\code\\\\energy\\\\qiantai\\\\vue-energy\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/get-iterator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  props: {\n    importResultVisible: {\n      required: true,\n      default: false\n    },\n    importData: {\n      required: true\n    },\n    errors: {\n      required: true\n    },\n    times: {\n      required: true\n    }\n  },\n  data: function data() {\n    return {\n      pagination: {\n        pageSizeOptions: ['5', '10'],\n        defaultCurrent: 1,\n        defaultPageSize: 5,\n        showQuickJumper: true,\n        showSizeChanger: true,\n        showTotal: function showTotal(total, range) {\n          return \"\\u663E\\u793A \".concat(range[0], \" ~ \").concat(range[1], \" \\u6761\\u8BB0\\u5F55\\uFF0C\\u5171 \").concat(total, \" \\u6761\\u8BB0\\u5F55\");\n        }\n      }\n    };\n  },\n  computed: {\n    errorsData: function errorsData() {\n      var arr = [];\n\n      for (var i = 0; i < this.errors.length; i++) {\n        var error = this.errors[i];\n        var e = {};\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = _getIterator(error.errorFields), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var field = _step.value;\n            e = _objectSpread({}, field);\n            e.row = error.row;\n            arr.push(e);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      }\n\n      return arr;\n    },\n    successColumns: function successColumns() {\n      return [{\n        title: '字段1',\n        dataIndex: 'field1'\n      }, {\n        title: '字段2',\n        dataIndex: 'field2'\n      }, {\n        title: '字段3',\n        dataIndex: 'field3'\n      }, {\n        title: '导入时间',\n        dataIndex: 'createTime'\n      }];\n    },\n    errorColumns: function errorColumns() {\n      return [{\n        title: '行',\n        dataIndex: 'row',\n        customRender: function customRender(text, row, index) {\n          return \"\\u7B2C \".concat(text + 1, \" \\u884C\");\n        }\n      }, {\n        title: '列',\n        dataIndex: 'cellIndex',\n        customRender: function customRender(text, row, index) {\n          return \"\\u7B2C \".concat(text + 1, \" \\u5217\");\n        }\n      }, {\n        title: '列名',\n        dataIndex: 'column'\n      }, {\n        title: '错误信息',\n        dataIndex: 'errorMessage'\n      }];\n    },\n    show: {\n      get: function get() {\n        return this.importResultVisible;\n      },\n      set: function set() {}\n    }\n  },\n  methods: {\n    handleCancel: function handleCancel() {\n      this.$emit('close');\n    }\n  }\n};",{"version":3,"sources":["ImportResult.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <a-modal\n    class=\"import-result\"\n    title=\"导入结果\"\n    v-model=\"show\"\n    :centered=\"true\"\n    :footer=\"null\"\n    :maskClosable=\"false\"\n    :width=1000\n    @cancel=\"handleCancel\">\n    <div class=\"import-desc\">\n      <span v-if=\"importData.length === 0 && errors.length === 0\">\n        <a-alert\n          message=\"暂无导入记录\"\n          type=\"info\">\n        </a-alert>\n      </span>\n      <span v-if=\"importData.length !== 0 && errors.length !== 0\">\n        <a-alert\n          message=\"部分导入成功\"\n          type=\"warning\">\n          <div slot=\"description\">\n            成功导入 <a>{{importData.length}}</a> 条记录，<a>{{errors.length}}</a> 条记录导入失败，共耗时 <a>{{times}}</a> 秒\n          </div>\n        </a-alert>\n      </span>\n      <span v-if=\"importData.length !== 0 && errors.length === 0\">\n        <a-alert\n          message=\"全部导入成功\"\n          type=\"success\">\n          <div slot=\"description\">\n            成功导入 <a>{{importData.length}}</a> 条记录，共耗时 <a>{{times}}</a> 秒\n          </div>\n        </a-alert>\n      </span>\n      <span v-if=\"importData.length === 0 && errors.length !== 0\">\n        <a-alert\n          message=\"全部导入失败\"\n          type=\"error\">\n          <div slot=\"description\">\n            <a>{{errors.length}}</a> 条记录导入失败，共耗时  <a>{{times}}</a> 秒\n          </div>\n        </a-alert>\n      </span>\n    </div>\n    <a-tabs defaultActiveKey=\"1\">\n      <a-tab-pane tab=\"成功记录\" key=\"1\" v-if=\"importData.length\">\n        <a-table ref=\"successTable\"\n                 :columns=\"successColumns\"\n                 :dataSource=\"importData\"\n                 :pagination=\"pagination\"\n                 :scroll=\"{ x: 900 }\">\n        </a-table>\n      </a-tab-pane>\n      <a-tab-pane tab=\"失败记录\" key=\"2\" v-if=\"errors.length\">\n        <a-table ref=\"errorTable\"\n                 :columns=\"errorColumns\"\n                 :dataSource=\"errorsData\"\n                 :pagination=\"pagination\"\n                 :scroll=\"{ x: 900 }\">\n        </a-table>\n      </a-tab-pane>\n    </a-tabs>\n  </a-modal>\n</template>\n<script>\nexport default {\n  props: {\n    importResultVisible: {\n      required: true,\n      default: false\n    },\n    importData: {\n      required: true\n    },\n    errors: {\n      required: true\n    },\n    times: {\n      required: true\n    }\n  },\n  data () {\n    return {\n      pagination: {\n        pageSizeOptions: ['5', '10'],\n        defaultCurrent: 1,\n        defaultPageSize: 5,\n        showQuickJumper: true,\n        showSizeChanger: true,\n        showTotal: (total, range) => `显示 ${range[0]} ~ ${range[1]} 条记录，共 ${total} 条记录`\n      }\n    }\n  },\n  computed: {\n    errorsData () {\n      let arr = []\n      for (let i = 0; i < this.errors.length; i++) {\n        let error = this.errors[i]\n        let e = {}\n        for (let field of error.errorFields) {\n          e = {...field}\n          e.row = error.row\n          arr.push(e)\n        }\n      }\n      return arr\n    },\n    successColumns () {\n      return [{\n        title: '字段1',\n        dataIndex: 'field1'\n      }, {\n        title: '字段2',\n        dataIndex: 'field2'\n      }, {\n        title: '字段3',\n        dataIndex: 'field3'\n      }, {\n        title: '导入时间',\n        dataIndex: 'createTime'\n      }]\n    },\n    errorColumns () {\n      return [{\n        title: '行',\n        dataIndex: 'row',\n        customRender: (text, row, index) => {\n          return `第 ${text + 1} 行`\n        }\n      }, {\n        title: '列',\n        dataIndex: 'cellIndex',\n        customRender: (text, row, index) => {\n          return `第 ${text + 1} 列`\n        }\n      }, {\n        title: '列名',\n        dataIndex: 'column'\n      }, {\n        title: '错误信息',\n        dataIndex: 'errorMessage'\n      }]\n    },\n    show: {\n      get: function () {\n        return this.importResultVisible\n      },\n      set: function () {\n      }\n    }\n  },\n  methods: {\n    handleCancel () {\n      this.$emit('close')\n    }\n  }\n}\n</script>\n<style lang=\"less\">\n  .import-result {\n    .import-desc {\n      margin-bottom: .5rem;\n      a {\n        font-weight: 600;\n      }\n    }\n  }\n</style>\n"],"sourceRoot":"src\\components\\common"}]}