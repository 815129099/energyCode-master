{"remainingRequest":"E:\\code\\energy\\qiantai\\vue-energy-copy\\node_modules\\thread-loader\\dist\\cjs.js!E:\\code\\energy\\qiantai\\vue-energy-copy\\node_modules\\babel-loader\\lib\\index.js!E:\\code\\energy\\qiantai\\vue-energy-copy\\src\\api\\utils\\request.js","dependencies":[{"path":"E:\\code\\energy\\qiantai\\vue-energy-copy\\src\\api\\utils\\request.js","mtime":1564020036053},{"path":"E:\\code\\energy\\qiantai\\vue-energy-copy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy-copy\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy-copy\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Promise from \"E:\\\\code\\\\energy\\\\qiantai\\\\vue-energy-copy\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/promise\";\nimport Vue from 'vue';\nimport axios from 'axios';\nimport { Message, MessageBox } from 'element-ui';\nimport store from '../../store'; // 创建axios实例\n\nvar service = axios.create({\n  //baseURL: process.env.BASE_API, // api的base_url\n  timeout: 1000 * 30,\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json; charset=utf-8'\n  }\n}); // request拦截器\n\nservice.interceptors.request.use(function (config) {\n  //config.headers['Authorization'] = Vue.cookie.get('token');\n  return config;\n}, function (error) {\n  return _Promise.reject(error);\n}); // response拦截器\n\nservice.interceptors.response.use(function (response) {\n  console.log(response);\n\n  if (response.data && response.data.status == \"20011\") {\n    // -1, token失效 401 没有token\n    //Vue.cookie.delete('token');\n    // Vue.router.push({name: 'login'});\n    //this.$message(\"登录过期，请重新登录！\");\n    //Vue.router.push({name: 'login'});\n    // this.$router.push({path: 'login'});\n    Message({\n      showClose: true,\n      message: response.data.msg,\n      type: 'error',\n      duration: 500,\n      onClose: function onClose() {\n        store.dispatch('FedLogOut').then(function () {\n          location.reload(); // 为了重新实例化vue-router对象 避免bug\n        });\n      }\n    });\n    return _Promise.reject(\"未登录\");\n  } else if (response.data && response.data.status != '0') {\n    Message({\n      message: response.data.msg,\n      type: 'error',\n      duration: 2 * 1000\n    });\n    return _Promise.reject(response.data);\n  }\n\n  return response;\n}, function (error) {\n  return _Promise.reject(error);\n});\nexport default service;",null]}