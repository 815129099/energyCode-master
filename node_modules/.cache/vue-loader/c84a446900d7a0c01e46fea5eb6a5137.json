{"remainingRequest":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\energy\\qiantai\\vue-energy\\src\\components\\common\\ImportResult.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\code\\energy\\qiantai\\vue-energy\\src\\components\\common\\ImportResult.vue","mtime":1560150704665},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  props: {\n    importResultVisible: {\n      required: true,\n      default: false\n    },\n    importData: {\n      required: true\n    },\n    errors: {\n      required: true\n    },\n    times: {\n      required: true\n    }\n  },\n  data () {\n    return {\n      pagination: {\n        pageSizeOptions: ['5', '10'],\n        defaultCurrent: 1,\n        defaultPageSize: 5,\n        showQuickJumper: true,\n        showSizeChanger: true,\n        showTotal: (total, range) => `显示 ${range[0]} ~ ${range[1]} 条记录，共 ${total} 条记录`\n      }\n    }\n  },\n  computed: {\n    errorsData () {\n      let arr = []\n      for (let i = 0; i < this.errors.length; i++) {\n        let error = this.errors[i]\n        let e = {}\n        for (let field of error.errorFields) {\n          e = {...field}\n          e.row = error.row\n          arr.push(e)\n        }\n      }\n      return arr\n    },\n    successColumns () {\n      return [{\n        title: '字段1',\n        dataIndex: 'field1'\n      }, {\n        title: '字段2',\n        dataIndex: 'field2'\n      }, {\n        title: '字段3',\n        dataIndex: 'field3'\n      }, {\n        title: '导入时间',\n        dataIndex: 'createTime'\n      }]\n    },\n    errorColumns () {\n      return [{\n        title: '行',\n        dataIndex: 'row',\n        customRender: (text, row, index) => {\n          return `第 ${text + 1} 行`\n        }\n      }, {\n        title: '列',\n        dataIndex: 'cellIndex',\n        customRender: (text, row, index) => {\n          return `第 ${text + 1} 列`\n        }\n      }, {\n        title: '列名',\n        dataIndex: 'column'\n      }, {\n        title: '错误信息',\n        dataIndex: 'errorMessage'\n      }]\n    },\n    show: {\n      get: function () {\n        return this.importResultVisible\n      },\n      set: function () {\n      }\n    }\n  },\n  methods: {\n    handleCancel () {\n      this.$emit('close')\n    }\n  }\n}\n",{"version":3,"sources":["ImportResult.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ImportResult.vue","sourceRoot":"src\\components\\common","sourcesContent":["<template>\n  <a-modal\n    class=\"import-result\"\n    title=\"导入结果\"\n    v-model=\"show\"\n    :centered=\"true\"\n    :footer=\"null\"\n    :maskClosable=\"false\"\n    :width=1000\n    @cancel=\"handleCancel\">\n    <div class=\"import-desc\">\n      <span v-if=\"importData.length === 0 && errors.length === 0\">\n        <a-alert\n          message=\"暂无导入记录\"\n          type=\"info\">\n        </a-alert>\n      </span>\n      <span v-if=\"importData.length !== 0 && errors.length !== 0\">\n        <a-alert\n          message=\"部分导入成功\"\n          type=\"warning\">\n          <div slot=\"description\">\n            成功导入 <a>{{importData.length}}</a> 条记录，<a>{{errors.length}}</a> 条记录导入失败，共耗时 <a>{{times}}</a> 秒\n          </div>\n        </a-alert>\n      </span>\n      <span v-if=\"importData.length !== 0 && errors.length === 0\">\n        <a-alert\n          message=\"全部导入成功\"\n          type=\"success\">\n          <div slot=\"description\">\n            成功导入 <a>{{importData.length}}</a> 条记录，共耗时 <a>{{times}}</a> 秒\n          </div>\n        </a-alert>\n      </span>\n      <span v-if=\"importData.length === 0 && errors.length !== 0\">\n        <a-alert\n          message=\"全部导入失败\"\n          type=\"error\">\n          <div slot=\"description\">\n            <a>{{errors.length}}</a> 条记录导入失败，共耗时  <a>{{times}}</a> 秒\n          </div>\n        </a-alert>\n      </span>\n    </div>\n    <a-tabs defaultActiveKey=\"1\">\n      <a-tab-pane tab=\"成功记录\" key=\"1\" v-if=\"importData.length\">\n        <a-table ref=\"successTable\"\n                 :columns=\"successColumns\"\n                 :dataSource=\"importData\"\n                 :pagination=\"pagination\"\n                 :scroll=\"{ x: 900 }\">\n        </a-table>\n      </a-tab-pane>\n      <a-tab-pane tab=\"失败记录\" key=\"2\" v-if=\"errors.length\">\n        <a-table ref=\"errorTable\"\n                 :columns=\"errorColumns\"\n                 :dataSource=\"errorsData\"\n                 :pagination=\"pagination\"\n                 :scroll=\"{ x: 900 }\">\n        </a-table>\n      </a-tab-pane>\n    </a-tabs>\n  </a-modal>\n</template>\n<script>\nexport default {\n  props: {\n    importResultVisible: {\n      required: true,\n      default: false\n    },\n    importData: {\n      required: true\n    },\n    errors: {\n      required: true\n    },\n    times: {\n      required: true\n    }\n  },\n  data () {\n    return {\n      pagination: {\n        pageSizeOptions: ['5', '10'],\n        defaultCurrent: 1,\n        defaultPageSize: 5,\n        showQuickJumper: true,\n        showSizeChanger: true,\n        showTotal: (total, range) => `显示 ${range[0]} ~ ${range[1]} 条记录，共 ${total} 条记录`\n      }\n    }\n  },\n  computed: {\n    errorsData () {\n      let arr = []\n      for (let i = 0; i < this.errors.length; i++) {\n        let error = this.errors[i]\n        let e = {}\n        for (let field of error.errorFields) {\n          e = {...field}\n          e.row = error.row\n          arr.push(e)\n        }\n      }\n      return arr\n    },\n    successColumns () {\n      return [{\n        title: '字段1',\n        dataIndex: 'field1'\n      }, {\n        title: '字段2',\n        dataIndex: 'field2'\n      }, {\n        title: '字段3',\n        dataIndex: 'field3'\n      }, {\n        title: '导入时间',\n        dataIndex: 'createTime'\n      }]\n    },\n    errorColumns () {\n      return [{\n        title: '行',\n        dataIndex: 'row',\n        customRender: (text, row, index) => {\n          return `第 ${text + 1} 行`\n        }\n      }, {\n        title: '列',\n        dataIndex: 'cellIndex',\n        customRender: (text, row, index) => {\n          return `第 ${text + 1} 列`\n        }\n      }, {\n        title: '列名',\n        dataIndex: 'column'\n      }, {\n        title: '错误信息',\n        dataIndex: 'errorMessage'\n      }]\n    },\n    show: {\n      get: function () {\n        return this.importResultVisible\n      },\n      set: function () {\n      }\n    }\n  },\n  methods: {\n    handleCancel () {\n      this.$emit('close')\n    }\n  }\n}\n</script>\n<style lang=\"less\">\n  .import-result {\n    .import-desc {\n      margin-bottom: .5rem;\n      a {\n        font-weight: 600;\n      }\n    }\n  }\n</style>\n"]}]}