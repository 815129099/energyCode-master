{"remainingRequest":"E:\\code\\vue-workspace\\vue-manage-system-master\\node_modules\\babel-loader\\lib\\index.js!E:\\code\\vue-workspace\\vue-manage-system-master\\src\\api\\utils\\request.js","dependencies":[{"path":"E:\\code\\vue-workspace\\vue-manage-system-master\\src\\api\\utils\\request.js","mtime":1554971842104},{"path":"E:\\code\\vue-workspace\\vue-manage-system-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\vue-workspace\\vue-manage-system-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Promise from \"E:\\\\code\\\\vue-workspace\\\\vue-manage-system-master\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/promise\";\nimport Vue from 'vue';\nimport axios from 'axios'; // 创建axios实例\n\nvar service = axios.create({\n  //baseURL: process.env.BASE_API, // api的base_url\n  timeout: 1000 * 30,\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json; charset=utf-8'\n  }\n}); // request拦截器\n\nservice.interceptors.request.use(function (config) {\n  config.headers['Authorization'] = Vue.cookie.get('token');\n  return config;\n}, function (error) {\n  return _Promise.reject(error);\n}); // response拦截器\n\nservice.interceptors.response.use(function (response) {\n  console.log(response);\n\n  if (response.data && response.data.msg != 'success' || response.data && response.data.status != 0) {\n    // -1, token失效 401 没有token\n    Vue.cookie.delete('token');\n    Vue.router.push({\n      name: 'login'\n    });\n  }\n\n  return response;\n}, function (error) {\n  return _Promise.reject(error);\n});\nexport default service;",{"version":3,"sources":["E:\\code\\vue-workspace\\vue-manage-system-master\\src\\api\\utils\\request.js"],"names":["Vue","axios","service","create","timeout","withCredentials","headers","interceptors","request","use","config","cookie","get","error","reject","response","console","log","data","msg","status","delete","router","push","name"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAEA;;AACA,IAAMC,OAAO,GAAGD,KAAK,CAACE,MAAN,CAAa;AACzB;AACAC,EAAAA,OAAO,EAAE,OAAO,EAFS;AAGzBC,EAAAA,eAAe,EAAE,IAHQ;AAIzBC,EAAAA,OAAO,EAAE;AACL,oBAAgB;AADX;AAJgB,CAAb,CAAhB,C,CASA;;AACAJ,OAAO,CAACK,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CAAiC,UAAAC,MAAM,EAAI;AACvCA,EAAAA,MAAM,CAACJ,OAAP,CAAe,eAAf,IAAkCN,GAAG,CAACW,MAAJ,CAAWC,GAAX,CAAe,OAAf,CAAlC;AACA,SAAOF,MAAP;AACH,CAHD,EAGG,UAAAG,KAAK,EAAI;AACR,SAAO,SAAQC,MAAR,CAAeD,KAAf,CAAP;AACH,CALD,E,CAOA;;AACAX,OAAO,CAACK,YAAR,CAAqBQ,QAArB,CAA8BN,GAA9B,CAAkC,UAAAM,QAAQ,EAAI;AAC1CC,EAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,MAAIA,QAAQ,CAACG,IAAT,IAAiBH,QAAQ,CAACG,IAAT,CAAcC,GAAd,IAAoB,SAArC,IACAJ,QAAQ,CAACG,IAAT,IAAiBH,QAAQ,CAACG,IAAT,CAAcE,MAAd,IAAwB,CAD7C,EACgD;AAAE;AAC9CpB,IAAAA,GAAG,CAACW,MAAJ,CAAWU,MAAX,CAAkB,OAAlB;AACArB,IAAAA,GAAG,CAACsB,MAAJ,CAAWC,IAAX,CAAgB;AAACC,MAAAA,IAAI,EAAE;AAAP,KAAhB;AACH;;AACD,SAAOT,QAAP;AACH,CARD,EAQG,UAAAF,KAAK,EAAI;AACR,SAAO,SAAQC,MAAR,CAAeD,KAAf,CAAP;AACH,CAVD;AAYA,eAAeX,OAAf","sourcesContent":["import Vue from 'vue';\r\nimport axios from 'axios';\r\n\r\n// 创建axios实例\r\nconst service = axios.create({\r\n    //baseURL: process.env.BASE_API, // api的base_url\r\n    timeout: 1000 * 30,\r\n    withCredentials: true,\r\n    headers: {\r\n        'Content-Type': 'application/json; charset=utf-8'\r\n    }\r\n});\r\n\r\n// request拦截器\r\nservice.interceptors.request.use(config => {\r\n    config.headers['Authorization'] = Vue.cookie.get('token');\r\n    return config;\r\n}, error => {\r\n    return Promise.reject(error);\r\n});\r\n\r\n// response拦截器\r\nservice.interceptors.response.use(response => {\r\n    console.log(response);\r\n    if (response.data && response.data.msg !='success' ||\r\n        response.data && response.data.status != 0) { // -1, token失效 401 没有token\r\n        Vue.cookie.delete('token');\r\n        Vue.router.push({name: 'login'});\r\n    }\r\n    return response;\r\n}, error => {\r\n    return Promise.reject(error);\r\n});\r\n\r\nexport default service;\r\n"]}]}