{"remainingRequest":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\babel-loader\\lib\\index.js!E:\\code\\energy\\qiantai\\vue-energy\\src\\components\\common\\chart\\LineExample.js","dependencies":[{"path":"E:\\code\\energy\\qiantai\\vue-energy\\src\\components\\common\\chart\\LineExample.js","mtime":1557736292541},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport { reactiveProp } from './mixins';\nimport Chart from 'chart.js';\nimport { generateChart } from './BaseCharts';\nChart.defaults.LineWithLine = Chart.defaults.line;\nChart.controllers.LineWithLine = Chart.controllers.line.extend({\n  draw: function draw(ease) {\n    Chart.controllers.line.prototype.draw.call(this, ease);\n\n    if (this.chart.tooltip._active && this.chart.tooltip._active.length) {\n      var activePoint = this.chart.tooltip._active[0];\n      var ctx = this.chart.ctx;\n      var x = activePoint.tooltipPosition().x;\n      var topY = this.chart.scales['y-axis-0'].top;\n      var bottomY = this.chart.scales['y-axis-0'].bottom; // draw line\n\n      ctx.save();\n      ctx.beginPath();\n      ctx.moveTo(x, topY);\n      ctx.lineTo(x, bottomY);\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = 'black';\n      ctx.stroke();\n      ctx.restore();\n    }\n  }\n});\nvar LineWithLine = generateChart('line-with-chart', 'LineWithLine');\nexport default {\n  extends: LineWithLine,\n  mixins: [reactiveProp],\n  data: function data() {\n    return {\n      options: {\n        responsive: true,\n        maintainAspectRatio: false,\n        tooltips: {\n          intersect: false,\n          mode: 'index',\n          axis: 'x'\n        },\n        hover: {\n          animationDuration: 0 // 防止鼠标移上去，数字闪烁\n\n        },\n        animation: {\n          duration: 1,\n          onComplete: function onComplete() {\n            var chartInstance = this.chart,\n                ctx = chartInstance.ctx;\n            ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, Chart.defaults.global.defaultFontStyle, Chart.defaults.global.defaultFontFamily);\n            ctx.textAlign = 'center';\n            ctx.textBaseline = 'bottom';\n            ctx.fillStyle = 'gray';\n            this.data.datasets.forEach(function (dataset, i) {\n              var meta = chartInstance.controller.getDatasetMeta(i);\n              meta.data.forEach(function (arc, index) {\n                var data = dataset.data[index];\n                var ct = Math.round(arc._model.width * 0.35);\n\n                if (ct < 12) {\n                  ct = 12;\n                }\n\n                ctx.font = ct + 'px Arial';\n                ctx.fillText(data, arc._model.x, data >= 0 ? arc._model.y : arc._model.y + 15);\n              });\n            });\n          }\n        }\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.renderChart(this.chartData, this.options);\n  }\n};",{"version":3,"sources":["E:\\code\\energy\\qiantai\\vue-energy\\src\\components\\common\\chart\\LineExample.js"],"names":["reactiveProp","Chart","generateChart","defaults","LineWithLine","line","controllers","extend","draw","ease","prototype","call","chart","tooltip","_active","length","activePoint","ctx","x","tooltipPosition","topY","scales","top","bottomY","bottom","save","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","restore","extends","mixins","data","options","responsive","maintainAspectRatio","tooltips","intersect","mode","axis","hover","animationDuration","animation","duration","onComplete","chartInstance","font","helpers","fontString","global","defaultFontSize","defaultFontStyle","defaultFontFamily","textAlign","textBaseline","fillStyle","datasets","forEach","dataset","i","meta","controller","getDatasetMeta","arc","index","ct","Math","round","_model","width","fillText","y","mounted","renderChart","chartData"],"mappings":"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","sourcesContent":["\r\nimport { reactiveProp } from './mixins'\r\nimport Chart from 'chart.js'\r\nimport { generateChart } from './BaseCharts'\r\n\r\nChart.defaults.LineWithLine = Chart.defaults.line\r\nChart.controllers.LineWithLine = Chart.controllers.line.extend({\r\n  draw: function (ease) {\r\n    Chart.controllers.line.prototype.draw.call(this, ease)\r\n\r\n    if (this.chart.tooltip._active && this.chart.tooltip._active.length) {\r\n      let activePoint = this.chart.tooltip._active[0]\r\n      let ctx = this.chart.ctx\r\n      let x = activePoint.tooltipPosition().x\r\n      let topY = this.chart.scales['y-axis-0'].top\r\n      let bottomY = this.chart.scales['y-axis-0'].bottom\r\n\r\n      // draw line\r\n      ctx.save()\r\n      ctx.beginPath()\r\n      ctx.moveTo(x, topY)\r\n      ctx.lineTo(x, bottomY)\r\n      ctx.lineWidth = 2\r\n      ctx.strokeStyle = 'black'\r\n      ctx.stroke()\r\n      ctx.restore()\r\n    }\r\n  }\r\n})\r\n\r\nconst LineWithLine = generateChart('line-with-chart', 'LineWithLine')\r\n\r\nexport default {\r\n  extends: LineWithLine,\r\n  mixins: [reactiveProp],\r\n  data: () => ({\r\n    options: {\r\n      responsive: true,\r\n      maintainAspectRatio: false,\r\n      tooltips: {\r\n        intersect: false,\r\n        mode: 'index',\r\n        axis: 'x'\r\n      },\r\n      hover: {\r\n        animationDuration: 0  // 防止鼠标移上去，数字闪烁\r\n      },\r\n      animation: {\r\n        duration: 1,\r\n        onComplete: function() {\r\n            var chartInstance = this.chart,\r\n            ctx = chartInstance.ctx;\r\n            ctx.font = Chart.helpers.fontString(Chart.defaults.global.defaultFontSize, Chart.defaults.global.defaultFontStyle, Chart.defaults.global.defaultFontFamily);\r\n            ctx.textAlign = 'center';\r\n            ctx.textBaseline = 'bottom';\r\n            ctx.fillStyle = 'gray';\r\n\r\n            this.data.datasets.forEach(function(dataset, i) {\r\n                var meta = chartInstance.controller.getDatasetMeta(i);\r\n                meta.data.forEach(function(arc, index) {\r\n                    var data = dataset.data[index];\r\n                    var ct=Math.round(arc._model.width*0.35);\r\n                    if(ct<12){ct=12;}\r\n                    ctx.font=ct+'px Arial';\r\n\r\n                    ctx.fillText(data, arc._model.x, data>=0?arc._model.y :arc._model.y+15);\r\n                });\r\n            });\r\n        }\r\n      }\r\n    }\r\n  }),\r\n\r\n  mounted () {\r\n    this.renderChart(this.chartData, this.options)\r\n  }\r\n}"]}]}