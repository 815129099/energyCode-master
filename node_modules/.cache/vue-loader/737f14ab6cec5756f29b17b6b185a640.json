{"remainingRequest":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\code\\energy\\qiantai\\vue-energy\\src\\components\\page\\User.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\code\\energy\\qiantai\\vue-energy\\src\\components\\page\\User.vue","mtime":1559119701485},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\code\\energy\\qiantai\\vue-energy\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport API from '@/api';\r\nimport Vue from 'vue';\r\nexport default {\r\n      data() {\t\r\n          return{\r\n              //表格当前页数据\r\n\t\t    \ttableData: [],\r\n\t\t    \t//多选数组\r\n\t\t        multipleSelection: [],\r\n\t\t        //搜索条件\r\n\t\t        criteria: '',\r\n\t\t        //下拉菜单选项\r\n\t\t        select: '',\r\n\t\t        //默认每页数据量\r\n\t\t        pagesize: 10,\r\n\t\t        //默认高亮行数据id\r\n\t\t        highlightId: -1,\r\n\t\t        //当前页码\r\n\t\t        currentPage: 1,\r\n\t\t        //查询的页码\r\n\t\t        start: 1,\r\n\t\t        //默认数据总数\r\n\t\t        totalCount: 1000,\r\n\t\t\t\teditUserForm: {\r\n\t\t\t\t\tgeNumber: '',\r\n\t\t\t\t\tuserState: ''\r\n                },\r\n                addUserForm: {\r\n                    geNumber: '',\r\n                    geName:'',\r\n                    userState: '',\r\n                    phone:'',\r\n                    email:'',\r\n                    password:''\r\n                },\r\n                dialogFormVisible: false,\r\n                addFormVisible: false,\r\n                formLabelWidth: '120px',\r\n                rules: {\r\n                    geNumber: [\r\n                        { required: true, message: '请填写工号', trigger: 'blur' },\r\n                        { min: 7,max: 7, message: '请填写7个字符的工号', trigger: 'blur' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tgeName: [\r\n                        { required: true, message: '请填写姓名', trigger: 'blur' },\r\n                        { min: 2,max: 4, message: '请填写2-4个字符的姓名', trigger: 'blur' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tpassword: [\r\n                        { required: true, message: '请填写密码', trigger: 'blur' },\r\n                        { min: 6,max: 10, message: '请填写6-10个字符的密码', trigger: 'blur' }\r\n                    ],\r\n                    userState: [\r\n                        { required: true, message: '请选择状态', trigger: 'blur' }\r\n\t\t\t\t\t],\r\n\t\t\t\t\tphone: [\r\n                          { \r\n                             validator: (rule,value,callback) => {\r\n                                let vdt = API.validate.VDATA(value,{\"required\" : { msg : \"请输入手机号\"}, \"mphone\" : {msg:\"请输入有效的手机号\"}})\r\n                               if (!vdt.result) {\r\n                                    callback(new Error(vdt.msg))\r\n                                }else{\r\n                                    callback();\r\n                                }\r\n                           },\r\n                             trigger: 'blur' \r\n                           }\r\n\t\t\t\t\t],\r\n\t\t\t\t\temail: [\r\n                          { \r\n                             validator: (rule,value,callback) => {\r\n                                let vdt = API.validate.VDATA(value,{\"required\" : { msg : \"请输入邮箱\"}, \"email\" : {msg:\"请输入有效的邮箱\"}})\r\n                               if (!vdt.result) {\r\n                                    callback(new Error(vdt.msg))\r\n                                }else{\r\n                                    callback();\r\n                                }\r\n                           },\r\n                             trigger: 'blur' \r\n                           }\r\n\t\t\t\t\t],\r\n                }\r\n               }\t  \r\n            },\r\n             created() {\r\n            this.loadData(this.criteria, this.currentPage, this.pagesize);\r\n            },\r\n\t\t    methods: {\r\n\t\t        //从服务器读取数据\r\n\t\t\t\tloadData: function(criteria, pageNum, pageSize){\t\t\r\n                     let params = {\r\n                    'parameter': criteria,\r\n                    'pageNum': pageNum,\r\n                    'pageSize': pageSize\r\n                  };\t\r\n                  API.userUtil.getData(params).then(({data}) => {\r\n                       console.log(data);\r\n                        if (data.status == 0){\r\n                            this.tableData = data.data.userData;\r\n                \t\t    this.totalCount = data.data.number; \r\n                        } else {\r\n                            //this.$Message.error(data.msg);\r\n                            this.$message(\"请求失败！\");\r\n                        }\r\n                    }).catch((data) => {\r\n                    this.$message(\"请求失败ww！\");\r\n                    console.log(data);\r\n                });\t\r\n\t\t\t\t},\r\n\t\t    \t\r\n\t\t\t\t//多选响应\r\n\t\t\t    handleSelectionChange: function(val) {\r\n\t\t\t        this.multipleSelection = val;\r\n\t\t\t    },\r\n\t\t\t    \r\n\t\t\t    //点击行响应\r\n\t\t\t    handleclick: function(row, event, column){\r\n\t\t\t    \tthis.highlightId = row.id;\r\n\t\t\t    },\r\n\t\t\t\t\t\r\n\t\t\t    //编辑\r\n\t\t\t\thandleEdit: function(index, row) {\r\n\t\t\t\t\tthis.editUserForm.geNumber = row.geNumber;\r\n\t\t\t\t\tthis.editUserForm.userState = row.userState;\r\n\t\t\t\t\tthis.dialogFormVisible = true;\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t//修改\r\n                editSubmitForm(editUserForm){\r\n                       let params = {\r\n                    'geNumber': this.editUserForm.geNumber,\r\n                    'userState': this.editUserForm.userState\r\n                  };\t\r\n                    this.$refs[editUserForm].validate((valid) => {\r\n                    if (valid) {\r\n                        API.userUtil.updateUser(params).then(({data}) => {\r\n                        if (data.data == true){\r\n                            this.dialogFormVisible = false;\r\n                            this.loadData(this.criteria, this.currentPage, this.pagesize);\r\n                        } else {\r\n                            this.$message(\"请求失败！\");\r\n                        }\r\n                    }).catch((data) => {\r\n                    this.$message(\"请求失败！\");\r\n                    console.log(data);\r\n                });\r\n                } else {\r\n                         this.$message.error(\"请求失败！\");\r\n                        return false;\r\n                }\r\n                });\r\n\t\t\t\t},    \r\n\t\t\t\t\r\n\t\t\t\t//添加用户\r\n                addSubmitForm(addUserForm){\r\n                       let params = {\r\n                    'geNumber': this.addUserForm.geNumber,\r\n                    'geName': this.addUserForm.geName,\r\n                    'userState': this.addUserForm.userState,\r\n                    'phone': this.addUserForm.phone,\r\n\t\t\t\t\t'email': this.addUserForm.email,\r\n\t\t\t\t\t'password': this.addUserForm.password\r\n                  };\t\r\n              \r\n                    this.$refs[addUserForm].validate((valid) => {\r\n                    if (valid) {\r\n                        API.userUtil.addUser(params).then(({data}) => {\r\n                        if (data.data == true){\r\n                            this.addFormVisible = false;\r\n                            this.$message(\"添加成功!\");\r\n                            this.loadData(this.criteria, this.currentPage, this.pagesize);\r\n                        } else {\r\n                            this.$message(\"请求失败！\");\r\n                        }\r\n                    }).catch((data) => {\r\n                    this.$message(\"请求失败！\");\r\n                    console.log(data);\r\n                });\r\n                } else {\r\n                        return false;\r\n                }\r\n                });\r\n\t\t\t\t}, \r\n\t\t\t\t\r\n\t\t        //单行删除\r\n\t\t\t    handleDelete: function(index, row) {\r\n                    let params = {'geNumber': row.geNumber};\t\r\n                    this.$confirm('此操作将永久删除“'+row.geNumber+'”, 是否继续?', '提示', {\r\n                        confirmButtonText: '确定',\r\n                        cancelButtonText: '取消',\r\n                        type: 'warning'\r\n                    }).then(() => {\r\n                        API.userUtil.deleteUser(params).then(({data}) => {\r\n                        if (data.data == true){\r\n                            this.$message({type: 'success',message: '删除成功!'});\r\n                            this.loadData(this.criteria, this.currentPage, this.pagesize);\r\n                        } else {\r\n                            this.$message({type: 'info',message: '删除失败'});          \r\n                        }\r\n                    }).catch((data) => {\r\n                    this.$message(\"请求失败！\");\r\n                });\r\n                        this.$message({type: 'success',message: '删除成功!'});\r\n                    }).catch(() => {\r\n                        this.$message({type: 'info',message: '已取消删除'});          \r\n                })\r\n\t\t        },\r\n\r\n\t\t        //搜索\r\n\t\t        search: function(){\r\n\t\t\t\t\tconsole.log(this.select);\r\n\t\t        \tthis.loadData(this.criteria, this.currentPage, this.pagesize);\r\n\t\t        },\r\n                add:function(){\r\n                    this.addFormVisible = true;\r\n\t\t\t\t},\r\n\t\t\t\texportUser(){\r\n\t\t\t\t\t\t window.location.href = \"http://localhost:8088/api/exportUser.do\";\r\n\t\t\t\t},\r\n\t\t\t\t/*\r\n\t\t        //多项删除\r\n\t\t        deletenames: function(){\r\n\t\t        \tif(this.multipleSelection.length==0)\r\n\t\t        \t\treturn;\r\n\t\t        \tvar array = [];\r\n\t\t        \tthis.multipleSelection.forEach((item) = > {\r\n\t\t        \t\tarray.push(item.id);\r\n\t\t\t        })\r\n\t\t\t\t\tthis.$http.post('../delete',{\"array\":array},{emulateJSON: true}).then(function(res){\r\n\t\t\t\t\t\tthis.loadData(this.criteria, this.currentPage, this.pagesize);\r\n\t\t            },function(){\r\n\t\t                console.log('failed');\r\n\t\t            });\r\n\t\t        },\r\n\t\t      */\r\n\t\t        //改变当前点击的行的class，高亮当前行\r\n\t\t        tableRowClassName: function(row, index){\r\n\t\t    \t   if(row.id == this.highlightId)\r\n\t\t    \t   {\r\n\t\t    \t\t  return 'info-row';\r\n\t\t    \t   }\r\n\t\t        },\r\n\t\t      \r\n\t\t        //每页显示数据量变更\r\n\t\t        handleSizeChange: function(val) {\r\n\t\t            this.pagesize = val;\r\n\t\t            this.loadData(this.criteria, this.currentPage, this.pagesize);\r\n\t\t        },\r\n\t\t        \r\n\t\t        //页码变更\r\n\t\t        handleCurrentChange: function(val) {\r\n\t\t            this.currentPage = val;\r\n\t\t            this.loadData(this.criteria, this.currentPage, this.pagesize);\r\n\t\t        },\t      \r\n\t\t        \t\t        \r\n\t\t    },\t    \r\n\t\t    \r\n}\r\n",null]}